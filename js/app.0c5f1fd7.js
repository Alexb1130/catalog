(function(e){function t(t){for(var c,a,u=t[0],s=t[1],i=t[2],l=0,p=[];l<u.length;l++)a=u[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,i||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],c=!0,u=1;u<r.length;u++){var s=r[u];0!==n[s]&&(c=!1)}c&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var c={},n={app:0},o=[];function a(t){if(c[t])return c[t].exports;var r=c[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=c,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(r,c,function(t){return e[t]}.bind(null,c));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/catalog/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var d=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var c=r("85ec"),n=r.n(c);n.a},"0c39":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var c=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"main-content"},[r("Table"),r("Cart")],1)])},o=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table-container"},[e.allProducts?e._e():r("div",[r("p",{staticClass:"loading"},[e._v("Загружаю товары...")])]),r("div",{staticClass:"table-settings"},[r("TableFilter"),r("button",{attrs:{disabled:!e.checkedProducts.length||!e.availableProducts.length},on:{click:e.sendToCart}},[e._v(" В корзину ")])],1),r("table",[r("thead",[r("tr",e._l(e.cols,(function(t,c){return r("th",{key:c},[e._v(" "+e._s(t)+" ")])})),0)]),r("tbody",[e.allFilteredProducts.length?e._l(e.allFilteredProducts,(function(t){return r("tr",{key:t.id},[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedProducts,expression:"checkedProducts"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedProducts)?e._i(e.checkedProducts,t)>-1:e.checkedProducts},on:{change:function(r){var c=e.checkedProducts,n=r.target,o=!!n.checked;if(Array.isArray(c)){var a=t,u=e._i(c,a);n.checked?u<0&&(e.checkedProducts=c.concat([a])):u>-1&&(e.checkedProducts=c.slice(0,u).concat(c.slice(u+1)))}else e.checkedProducts=o}}})]),r("td",[e._v(e._s(t.group.name))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.price)+" ₽")])])})):e._l(e.availableProducts,(function(t){return r("tr",{key:t.id},[r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedProducts,expression:"checkedProducts"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedProducts)?e._i(e.checkedProducts,t)>-1:e.checkedProducts},on:{change:function(r){var c=e.checkedProducts,n=r.target,o=!!n.checked;if(Array.isArray(c)){var a=t,u=e._i(c,a);n.checked?u<0&&(e.checkedProducts=c.concat([a])):u>-1&&(e.checkedProducts=c.slice(0,u).concat(c.slice(u+1)))}else e.checkedProducts=o}}})]),r("td",[e._v(e._s(t.group.name))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.price)+" ₽")])])}))],2)])])},u=[],s=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),i=r("2f62"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"filters"},[r("b",[e._v("Категории: ")]),r("select",{on:{change:e.filteredCategories}},[r("option",{attrs:{value:"0",selected:""}},[e._v("Без групировки")]),e._l(e.productCategories,(function(t){return r("option",{key:t.id,domProps:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])}))],2),r("b",[e._v("Сортировать: ")]),r("label",{attrs:{for:"sort-name"}},[e._v("По именам")]),r("input",{attrs:{type:"checkbox",id:"sort-name",name:"sort",value:"name"},on:{change:e.orderBy}}),r("label",{attrs:{for:"sort-price"}},[e._v("По цене")]),r("input",{attrs:{type:"checkbox",id:"sort-price",name:"sort",value:"price"},on:{change:e.orderBy}})])},l=[],p={computed:Object(i["c"])(["availableProducts","productCategories","allFilteredProducts"]),methods:Object(i["d"])(["filteredCategories","orderBy"])},f=p,b=(r("dfaa"),r("2877")),v=Object(b["a"])(f,d,l,!1,null,"7ff346e2",null),h=v.exports;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={data:function(){return{checkedProducts:[],cols:["Выбран","Категория","Товар","Цена"]}},components:{TableFilter:h},computed:Object(i["c"])(["availableProducts","productCategories","allProducts","allFilteredProducts"]),methods:g({},Object(i["b"])(["getProducts"]),{},Object(i["d"])(["addCart"]),{sendToCart:function(){this.addCart(this.checkedProducts),this.allFilteredProducts.length||document.querySelectorAll("select option").forEach((function(e){return e.selected=e.defaultSelected}))}}),created:function(){this.getProducts()}},O=y,m=(r("76a5"),Object(b["a"])(O,a,u,!1,null,null,null)),_=m.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cart"},[r("h1",[e._v("Корзина")]),e.cartProducts.length?e._e():r("p",[e._v("Тут пока пусто")]),r("ul",e._l(e.cartProducts,(function(t){return r("li",{key:t.id},[r("span",[e._v(" "+e._s(t.name)+" ")]),r("span",[e._v(" "+e._s(t.price)+" ₽ ")])])})),0)])},k=[],w={computed:Object(i["c"])(["cartProducts"])},C=w,x=(r("983a"),Object(b["a"])(C,j,k,!1,null,"54764d34",null)),S=x.exports,E={name:"app",components:{Table:_,Cart:S}},A=E,T=(r("034f"),Object(b["a"])(A,n,o,!1,null,null,null)),D=T.exports,F=(r("caad"),r("d81d"),r("b0c0"),r("d3b7"),r("6062"),r("2532"),r("3ca3"),r("ddb0"),r("2909")),B=(r("96cf"),r("2ef0")),$=r.n(B);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e){var t=[];return e.forEach((function(e){e.skus.forEach((function(r){r.group=R({},e.group),t.push(r)}))})),t},N={state:{products:[],productsOriginal:[],cart:[],filteredProducts:[]},actions:{getProducts:function(e){var t,r,c;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.commit,n.next=3,regeneratorRuntime.awrap(fetch("https://ssdev.superagent.ru/TestApp/Values/GetWithParent"));case 3:return r=n.sent,n.next=6,regeneratorRuntime.awrap(r.json());case 6:c=n.sent,t("unpateProducts",c);case 8:case"end":return n.stop()}}))}},mutations:{unpateProducts:function(e,t){e.productsOriginal=t,e.products=J(t)},addCart:function(e,t){e.cart=Object(F["a"])(new Set(t))},filteredCategories:function(e,t){e.filteredProducts=e.products.filter((function(e){return e.group.name===t.target.value}))},orderBy:function(e,t){var r,c=t.target;r="name"===c.value?c.checked?"asc":"desc":c.checked?"desc":"asc",e.filteredProducts.length&&(e.filteredProducts=$.a.orderBy(e.filteredProducts,c.value,r)),e.products=$.a.orderBy(e.products,c.value,r)}},getters:{allProducts:function(e){return e.products.length},allFilteredProducts:function(e){return e.filteredProducts.filter((function(t){return!e.cart.includes(t)}))},availableProducts:function(e){return e.products.filter((function(t){return!e.cart.includes(t)}))},cartProducts:function(e){return e.cart},productCategories:function(e){return e.productsOriginal.map((function(e){return e.group}))}}};c["a"].use(i["a"]);var q=new i["a"].Store({modules:{products:N}});c["a"].config.productionTip=!1,new c["a"]({store:q,render:function(e){return e(D)}}).$mount("#app")},"694f":function(e,t,r){},"76a5":function(e,t,r){"use strict";var c=r("694f"),n=r.n(c);n.a},"85ec":function(e,t,r){},"95e9":function(e,t,r){},"983a":function(e,t,r){"use strict";var c=r("95e9"),n=r.n(c);n.a},dfaa:function(e,t,r){"use strict";var c=r("0c39"),n=r.n(c);n.a}});
//# sourceMappingURL=app.0c5f1fd7.js.map